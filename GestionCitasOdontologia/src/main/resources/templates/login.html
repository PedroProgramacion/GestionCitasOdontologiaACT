<!DOCTYPE html>
<!-- Declaración del tipo de documento HTML5 -->
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<!-- Elemento raíz del documento, especifica idioma español y namespace para Thymeleaf -->

<head>
    <!-- Cabecera del documento (metadatos y enlaces) -->
    <meta charset="UTF-8"> <!-- Codificación de caracteres UTF-8 -->
    <title>Login</title> <!-- Título de la página -->

    <!-- Bootstrap CSS desde CDN con integridad SRI -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
          crossorigin="anonymous">

    <!-- Bootstrap JS Bundle desde CDN con integridad SRI -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
            crossorigin="anonymous"></script>

    <!-- Hoja de estilos personalizada -->
    <link rel="stylesheet" href="../css/estiloslogin.css">

    <!-- Favicon -->
    <link rel="icon" href="/multimedia/imgs/logo.jpg">
</head>

<body class="bg-light m-0 vh-100 row justify-content-center align-items-center">
<!--
    Cuerpo del documento con clases de Bootstrap para:
    - bg-light: fondo claro
    - m-0: sin márgenes
    - vh-100: altura completa del viewport
    - row: comportamiento de fila flex
    - justify-content-center: centrado horizontal
    - align-items-center: centrado vertical
-->

<!-- Contenedor principal del formulario -->
<div class="container my-5 text-center col-md-6">
    <!--
        Clases para:
        - my-5: margen vertical grande
        - text-center: texto centrado
        - col-md-6: ancho de 6 columnas en pantallas medianas/desktop
    -->

    <h1>Inicio de Sesión</h1> <!-- Título principal -->

    <!--
        Formulario de login con Thymeleaf
        - th:action="@{/login}": acción POST a /login (endpoint de Spring Security)
        - method="post": método HTTP POST
    -->
    <form th:action="@{/login}" method="post" class="form-control p-5">
        <!-- Contenedor para campos de formulario -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8">
                <!--
                    Campos en disposición vertical:
                    - col-12: ancho completo en móviles
                    - col-md-8: ancho de 8 columnas en desktop
                -->

                <!-- Campo Usuario -->
                <div class="mb-4"> <!-- mb-4: margen inferior grande -->
                    <label for="usuario">Usuario</label>
                    <input type="text" id="usuario" name="username" class="form-control" required autofocus />
                    <!--
                        Atributos del input:
                        - name="username": nombre requerido por Spring Security
                        - required: campo obligatorio
                        - autofocus: foco automático al cargar la página
                    -->
                </div>

                <!-- Campo Password -->
                <div class="mb-4">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" class="form-control" required />
                    <!--
                        Atributos del input:
                        - name="password": nombre requerido por Spring Security
                        - type="password": oculta el texto ingresado
                        - required: campo obligatorio
                    -->
                </div>
            </div>
        </div>

        <!-- Botón de submit -->
        <div>
            <button type="submit" class="btn btn-primary px-5">Entrar</button>
            <!--
                Clases del botón:
                - btn btn-primary: estilo primario de Bootstrap
                - px-5: padding horizontal grande
            -->
        </div>

        <!-- ===== MENSAJES CONDICIONALES ===== -->

        <!-- Mensaje de error - Solo visible cuando hay error de autenticación -->
        <div th:if="${param.error}" class="alert alert-danger mt-3">
            <!--
                th:if="${param.error}": muestra el div solo si existe el parámetro error
                alert alert-danger: estilo de alerta roja de Bootstrap
                mt-3: margen superior
            -->
            El usuario o contraseña no es válido
        </div>

        <!-- Mensaje de logout - Solo visible cuando se cierra sesión -->
        <div th:if="${param.logout}" class="alert alert-success mt-3">
            <!--
                th:if="${param.login}": muestra el div solo si existe el parámetro login
                alert alert-success: estilo de alerta verde de Bootstrap
            -->
            Sesión de usuario cerrada!
        </div>
    </form>
</div>

<!-- Script personalizado para funcionalidades de login -->
<script src="../js/login.js"></script>

</body>
</html>